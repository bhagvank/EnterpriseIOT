Mosquitto
 Overview  Mosquitto based application consists of messaging server connecting, subscribing to a topic and publishing to the topic. Mosquitto is based on Eclipse which is a lightweight server implementation of MQTT protocol.  HiveMQ, Apache ActiveMQ, Rabbit MQ, mosca, RSMB and Websphere MQ are other brokers based on MQTT protocol. MQTT Client libraries other than mosquito are eclipse paho, M2MQTT, Fuse source, Machine head, MQTT.js and ruby-mqtt.  MQTT client tools available are MQTT.fx, mqtt-spy, MQTT Inspector, HiveMQ Web socket Client, MyMQTT, MQTTLens and mosquito_pub/mosquito_sub.
Sensors and actuators are the sources and destinations of MQTT messages.  Message Queuing Telemetry Transport (MQTT) is a standard protocol.  Mosquitto is a broker which connects to other MQTT based messaging servers. Broker has features of passing MQTT messages from source to destination. The mosquitto message broker is based on publish-subscribe messaging pattern. The broker receives and sends all the messages to topics and holds the connection to clients persistent to the topics.  The broker distributes messages to subscribed clients based on the topic of a message. A topic is a UTF-8 string to filter messages for each connected client by the broker.  A topic consists of one or more topic levels separated by a forward slash.  MQTT Topic Wildcards are used for topic filters when subscribing to MQTT messages. Wildcards are not allowed in topic names for publishing messages. The wildcard characters are reserved and characters cannot be escaped. They are not used in the topic.
 Mosquitto is written in C and can run on very small devices.  The authentication options for mosquitto are no authentication, unauthenticated encrypted support and username/password authentication. The mosquitto auth plug provides a multi-provider backed way to provide authentication and authorization of MQTT messaging.  Multiple brokers   connect together to create a bridge to share information between locations.  Mosquitto does support MQTT QOS 2 and bridging. CloudMQTT are Mosquitto servers deployed on the cloud. CloudMQTT  internally manages scaling the broker  and patching the platform. Web socket support can be enabled for Mosquitto and it requires libwebsockets for building.  One can add listeners with the web socket protocol.  Mosquitto ACLs are used for Web sockets while MQTT publishes & subscribes to the broker.
MQTT was invented by Dr Andy Stanford-Clark of IBM, and Arlen Nipper of Arcom. MQTT is the preferred protocol for M2M and IoT applications. MQTT is a lightweight network protocol for publishing and subscribing messaging from sensors and devices. The old name for MQTT is MQ Integrator SCADA Device Protocol. The lightweight clients connect to a server using  MQTT. MQTT is simple and easy for implementation. MQTT does not support durable and persistent messages. It cannot be used in scenarios where you require the store-and-forward pattern. MQTT uses a hierarchical model for message topics.  MQTT message can be sent as a retained message which is a last known good value and persists at the MQTT broker for the specified topic. A new client which subscribes to a specific topic will instantly receive the last retained message on that topic.
  MQTT based networks have low network bandwidth requirements and high reliability of delivery. These networks have limited processing capabilities, small memory capacities and high latency. MQTT is for network connections where a small code footprint is required. MQTT-SN is related to MQTT and supports networking transports such as UDP, ZigBee and 6LoWPAN. MQTT specification has methods defined for connecting to the server, disconnecting from the server, subscribe, unsubscribe from one or more topics and publishing the messages. MQTT has three types of Quality of Service:  At most once delivery, At least Once Delivery and Exactly once delivery.  MQTT payloads are BLOBs with no data types specified.
MQTT is used in real life scenarios where reliable message delivery is crucial for an application. The real life use cases of MQTT include Telemetry, Automotive, Smart Home, Energy Monitoring, Chat Applications, Notification Services and Healthcare Applications. IoT protocols used for small devices are MQTT and CoAP.  
CoAP is a Constrained Applications Protocol used between constrained devices, cloud servers, home centrals and smart phones. The implementations are available in C like erbium, libcoap, tinydtls,  smcp,  microcoap, cantcoap, Lobaro coap, mr-coap and wakaama.  CoAP is based on the  REST model. In REST model, servers make resources available under a URL and clients access the resources using methods  GET, PUT, POST, and DELETE. CoAP  provides strong security and default choice of DTLS parameters is equivalent to 3072-bit RSA. CoAP resource directory is used  to discover the properties of the sensor nodes in the network.

General Network topologies
Sensors connect to public networks like M2M (3G/4G), LoRa, SigFox and private networks such as Z-Wave, ZigBee, Bluetooth, WIFI or Threat.  Low Power Wide Area Networks (LPWAN) are public iot networks. LPWAN have 800-900 MHz bandwidth. They  transmit data up to 100-140 messages per day . Low Power allows small  sensors to operate on regular batteries for 10-15 years. This technology allows Long Range  limiting the number of required antennas . The investment and the Total Cost of Ownership are very low.  M2M networks are 3G/4G networks with large data transmission  like global international roaming .Local Networks allow sensors and devices to communicate over short range distances like 10-100 meters. These local Gateways exchange information using WIFI or Fixed Internet lines. ZigBee, Z-Wave, WIFI, Bluetooth Low Energy (BLE) and Threat technologies.

A Wireless Sensor Network (WSN) is a network of sensor nodes.  The  sensor node consists of four parts: the power and power management module, a sensor, a microcontroller, and a wireless transceiver. The sensor node  is the bond of a WSN node which receives the information status. A sensor node collects information related to light, vibration, humidity  and temperature. The microcontroller receives the data from the sensor node. The network security protects the confidentiality,  integrity and availability of network data. The system is  reliable and secure from malicious attacks. The WSNs consists of message authentication, encryption, access control, identity and authentication. WSNs can perceive, collect and process information of the sensors and devices in the network. The network coverage is limited and the delay requirements are low. 
Network Topology
A network topology is an arrangement of a network including its nodes and connecting lines. The typical network topologies which exist are bus, ring, point-to-point, star, mesh and hybrid networks.
Bus Network

The bus network is unidirectional and has a one connection to transmit data between different devices.
It is a Master-Slave communication pattern which is used in bus network. Typically  Master commands and Slave will follow. It is best topology to use if  Master module does not need the status update from the slave. The bus network is a wired transmission which increases the data rate and minimizes the data loss. Bus network has a capability of adding an extra slave and sending broadcast messages.  The wired feature restricts the area of usage where devices are kept far from each other. The Master  transmits the data and the status & command implementation  is abstracted from Master.

Ring Network
In ring network, each node is connected to other two nodes in a form of ring. It is a unidirectional communication network. Ring network is a standalone topology as to reach a certain node there is a fix path to follow. The implementation time is low but data takes longer to reach the destination. It is very easy to implement as one has to define the path for each node. Ring network is very cost effective for smaller networks. Adding new nodes to the topology is an issue. For n node topology, the maximum number of nodes one data packet has to travel is n-1 because of its unidirectional characteristics.

Point-to-Point Network 
A point-to-point network connects  two network nodes. Communication happens between these two sensor nodes, or devices. This network is simple and of low cost. This is because of  the one-to-one relationship that exists between two devices.  This  network cannot scale beyond  two nodes. The range of the network is limited to one hop and the transmission range of a single device. A gateway node is external  to the world. Other network which allows users to make use of the sensor or device  connects to  the gateway node.
Star Network 
A star network consists of one gateway node to which all connected  sensor nodes in the network. The gateway node is a common point for all other sensor nodes in the network. All external  nodes communicate with all other sensor nodes by transmitting and receiving  through the gateway node. The gateway node is the connectivity point  to the external  world. 
The performance of the network is consistent, predictable and fast. This network has  low latency and high throughput.  A data packet  travels one hop to reach its destination to travel from gateway node to a sensor.  At most two hops are needed  in the case of two sensors communicating to each other. This is the reason for low and predicable network latency. There is high network reliability in Star network. Each device has  one connection to the hub. The range of star network  is transmission range of a single sensor. A star network has a single point of failure which is gateway node.
Mesh Network 
A typical  mesh network is a local area network (LAN), wireless local area network (WLAN) or virtual LAN (VLAN). A mesh network consists of three types of nodes, a gateway node , simple sensors nodes and router nodes. Router nodes capture and send the status information and relay information for other sensor nodes. They  collaborate with other nodes to send the data through the sensor network. In Mesh network , every  sensor node is within transmission range of at least one router node. Data packets go through multiple routers nodes to reach the gateway node.
 Mesh Networks can have two connection arrangements: full mesh topology or partial mesh topology. A full mesh topology has each network node  connected directly to each of the other nodes. A partial mesh topology has some nodes which are connected to all the other nodes  connected to those nodes which exchange the most data.
Hybrid Network
Hybrid networks are combinations of two or more basic network topologies. Hybrid  network  can consist of star-mesh network or a star-ring network. Hybrid networks are more flexible and reliable but complex to implement. The setup and management cost is high. 

Internet of Things Popular Topology
Mesh networks  play an important role in the Internet of Things . In a star topology,  a router  delivers Internet service and  network nodes can communicate  directly to each other without internet . A big advantage of this decentralized topology is that there cannot be a single point of failure (SPoF). If one node can no longer operate, the others can still communicate with each other, directly or through one or more intermediate nodes. Common IoT antenna typologies  are chip, wire, whip, PCB and proprietary. IOT antennas are chosen on based IOTmodules.
